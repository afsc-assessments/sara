---
title: "Stock assessment results archive (SARA)"
author: "Jim Ianelli "
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
library(tidyverse)
library(scales)
```
This shows some rudimentary ways to access the stock assessment results archive.

## Installation Instructions
This function likely depends on R version >=4.0.

Ensure that the "devtools" package from CRAN is installed

    # Install and load devtools package
    install.packages("devtools")
    library("devtools")

Next, install the SARA package from this GitHub repository using a function in the "devtools" package.  This may require using the `INSTALL_opts` option depending upon your version of R:

    # Install package
    install_github("afsc-assessments/SARA", INSTALL_opts="--no-staged-install")
    # Load package
    library(SARA)



## Accessing some results
Invoking `SARA()` will filter through the individual assessment result files in 
the data-raw directory and create a number of dataframes.

`library(SARA)`

`SARA()`

`df<-tibble(left_join(mod_stats,sara_stock));names(df) <- tolower(names(df))`

`glimpse(df)`

`df |> filter(assessyear==2021) |> ggplot(aes(x=spawnbiomass,y=recruitment,label=fisheryyear)) + `

`  geom_point(size=.2) + geom_smooth() + theme_minimal() + facet_wrap(stock~region,scale="free")`

```{r,echo=FALSE,warning=FALSE}
library(SARA)
SARA()
df<-tibble(left_join(mod_stats,sara_stock));
names(df) <- tolower(names(df))
df |> filter(assessyear==2021) |> ggplot(aes(x=spawnbiomass,y=recruitment,label=fisheryyear)) + 
  geom_point(size=.2) + geom_smooth() + theme_minimal() + facet_wrap(stock~region,scale="free")
```

